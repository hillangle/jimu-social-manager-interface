(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a270817e"],{"159b":function(t,e,n){var o=n("da84"),r=n("fdbc"),a=n("17c2"),c=n("9112");for(var u in r){var i=o[u],l=i&&i.prototype;if(l&&l.forEach!==a)try{c(l,"forEach",a)}catch(d){l.forEach=a}}},"17c2":function(t,e,n){"use strict";var o=n("b727").forEach,r=n("a640"),a=r("forEach");t.exports=a?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},3933:function(t,e,n){"use strict";n("764f")},7277:function(t,e,n){"use strict";n.r(e);n("b0c0");var o=n("7a23"),r=n("7159"),a=n.n(r),c=Object(o["gb"])("data-v-573bd532");Object(o["I"])("data-v-573bd532");var u={class:"user-info"},i=Object(o["o"])("img",{src:a.a,class:"user-avator",alt:""},null,-1),l={class:"user-info-cont"},d={class:"user-info-name"},s={class:"clearfix"},f=Object(o["o"])("span",null,"通知公告",-1),b=Object(o["n"])("添加"),O={class:"todo-item"},m={class:"dialog-footer"},h=Object(o["n"])("取 消"),j=Object(o["n"])("确 定");Object(o["G"])();var p=c((function(t,e,n,r,a,p){var g=Object(o["O"])("el-card"),v=Object(o["O"])("el-col"),w=Object(o["O"])("el-button"),y=Object(o["O"])("el-table-column"),_=Object(o["O"])("el-table"),V=Object(o["O"])("el-row"),x=Object(o["O"])("el-input"),k=Object(o["O"])("el-form-item"),D=Object(o["O"])("el-form"),C=Object(o["O"])("el-dialog");return Object(o["F"])(),Object(o["k"])("div",null,[Object(o["o"])(V,{gutter:20},{default:c((function(){return[Object(o["o"])(v,{span:8},{default:c((function(){return[Object(o["o"])(g,{shadow:"hover",class:"mgb20",style:{height:"252px"}},{default:c((function(){return[Object(o["o"])("div",u,[i,Object(o["o"])("div",l,[Object(o["o"])("div",d,Object(o["S"])(a.name),1),Object(o["o"])("div",null,Object(o["S"])(p.role),1)])])]})),_:1})]})),_:1}),Object(o["o"])(v,{span:16},{default:c((function(){return[Object(o["o"])(g,{shadow:"hover"},{header:c((function(){return[Object(o["o"])("div",s,[f,Object(o["o"])(w,{style:{float:"right",padding:"3px 0"},type:"text",onClick:p.addNotic},{default:c((function(){return[b]})),_:1},8,["onClick"])])]})),default:c((function(){return[Object(o["o"])(_,{data:a.noticList,style:{width:"100%"},ref:"multipleTable","header-cell-class-name":"table-header"},{default:c((function(){return[Object(o["o"])(y,{prop:"index",label:"序号"}),Object(o["o"])(y,{label:"标题"},{default:c((function(t){return[Object(o["o"])("div",O,Object(o["S"])(t.row.title),1)]})),_:1}),Object(o["o"])(y,{prop:"createDate",formatter:p.createDateFormat,align:"createDate",label:"发布时间"},null,8,["formatter"]),Object(o["o"])(y,{label:"操作"},{default:c((function(t){return[Object(o["o"])(w,{type:"text",class:"0"===t.row.status?"green":"red",onClick:function(e){return p.handleStatusChange(t.$index,t.row.status,t.row.unid)}},{default:c((function(){return[Object(o["n"])(Object(o["S"])("0"===t.row.status?"下架":"1"===t.row.status?"上架":""),1)]})),_:2},1032,["class","onClick"])]})),_:1})]})),_:1},8,["data"])]})),_:1})]})),_:1})]})),_:1}),Object(o["o"])(C,{title:"新增",modelValue:a.addVisible,"onUpdate:modelValue":e[4]||(e[4]=function(t){return a.addVisible=t}),width:"30%"},{footer:c((function(){return[Object(o["o"])("span",m,[Object(o["o"])(w,{onClick:e[3]||(e[3]=function(t){return a.addVisible=!1})},{default:c((function(){return[h]})),_:1}),Object(o["o"])(w,{type:"primary",onClick:p.saveEdit},{default:c((function(){return[j]})),_:1},8,["onClick"])])]})),default:c((function(){return[Object(o["o"])(D,{ref:"addForm",model:a.form,"label-width":"80px",rules:a.rule},{default:c((function(){return[Object(o["o"])(k,{label:"公告标题",prop:"title"},{default:c((function(){return[Object(o["o"])(x,{modelValue:a.form.title,"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.form.title=t})},null,8,["modelValue"])]})),_:1}),Object(o["o"])(k,{label:"公告内容",prop:"content"},{default:c((function(){return[Object(o["o"])(x,{type:"textarea",modelValue:a.form.content,"onUpdate:modelValue":e[2]||(e[2]=function(t){return a.form.content=t})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue"])])})),g=(n("159b"),n("b775")),v=function(t){return Object(g["a"])({url:"sys/notic/getNoticList",method:"get",params:t})},w=function(t){return Object(g["a"])({url:"sys/notic/updateNotic",method:"post",params:t})},y=function(t){return Object(g["a"])({url:"sys/notic/addNotic",method:"post",params:t})},_=null,V={name:"dashboard",data:function(){return{name:localStorage.getItem("ms_username"),noticList:[],query:{offset:1,limit:10},updateQuery:{unid:"",status:""},addVisible:!1,form:{title:"",content:""},rule:{title:[{required:!0,message:"请输入公告标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}]}}},components:{},computed:{role:function(){return"admin"===this.name?"超级管理员":"普通用户"}},methods:{changeDate:function(){var t=this;v(this.query).then((function(e){e.rows.forEach((function(t,e){t.index=e+1})),_.noticList=e.rows,t.pageTotal=e.total||0,t.offset=e.offset||1,t.fullscreenLoading=!1}))},createDateFormat:function(t){var e=new Date(t.createDate);if(!e)return"";var n=e.getFullYear(),o=this.dateIfAddZero(e.getMonth()+1),r=this.dateIfAddZero(e.getDate());return n+"-"+o+"-"+r},dateIfAddZero:function(t){return t},handleStatusChange:function(t,e,n){var o=this,r="确定要下架吗？";"1"==e&&(r="确认要上架吗？"),this.$confirm(r,"提示",{type:"warning"}).then((function(){o.updateQuery.status="0"==e?"1":"0",o.updateQuery.unid=n,w(o.updateQuery).then((function(){o.changeDate()}))})).catch((function(){}))},addNotic:function(){this.addVisible=!0},saveEdit:function(){var t=this;this.$refs.addForm.validate((function(e){if(!e)return t.$message.error("请检查填写内容"),!1;t.addVisible=!1,t.form.status="0",y(t.form).then((function(){t.changeDate(),t.form={}})),t.$refs.addForm.resetFields()}))}},created:function(){_=this,this.changeDate()}};n("3933");V.render=p,V.__scopeId="data-v-573bd532";e["default"]=V},"764f":function(t,e,n){},a640:function(t,e,n){"use strict";var o=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&o((function(){n.call(null,e||function(){throw 1},1)}))}}}]);
//# sourceMappingURL=chunk-a270817e.78f60ba8.js.map